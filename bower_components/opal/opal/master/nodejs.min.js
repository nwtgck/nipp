Opal.modules["nodejs/kernel"]=function(Opal){var TMP_$$$eq_3,TMP_$$_4,$nesting=(Opal.top,[]),nil=Opal.nil,$module=(Opal.breaker,Opal.slice,Opal.module);return Opal.add_stubs(["$to_str","$new","$to_s"]),Opal.exit=process.exit,function($base,$parent_nesting){var $Kernel,TMP_Kernel_caller_1,TMP_Kernel_node_require_2,self=$Kernel=$module($base,"Kernel"),$nesting=(self.$$proto,[self].concat($parent_nesting));Opal.const_set($nesting[0],"NODE_REQUIRE",require),Opal.defn(self,"$caller",TMP_Kernel_caller_1=function(){var args,$args_len=arguments.length,$rest_len=$args_len-0;0>$rest_len&&($rest_len=0),args=new Array($rest_len);for(var $arg_idx=0;$args_len>$arg_idx;$arg_idx++)args[$arg_idx-0]=arguments[$arg_idx];var stack;try{var err=Error("my error");throw err}catch(e){stack=e.stack}return stack.$split("\n").slice(3)},TMP_Kernel_caller_1.$$arity=-1),Opal.defn(self,"$node_require",TMP_Kernel_node_require_2=function(path){return Opal.const_get_relative($nesting,"NODE_REQUIRE")(path.$to_str())},TMP_Kernel_node_require_2.$$arity=1)}($nesting[0],$nesting),Opal.const_set($nesting[0],"ARGV",process.argv.slice(2)),Opal.const_set($nesting[0],"ENV",Opal.const_get_relative($nesting,"Object").$new()),Opal.defs(Opal.const_get_relative($nesting,"ENV"),"$[]=",TMP_$$$eq_3=function(name,value){return process.env[name.$to_s()]=value.$to_s()},TMP_$$$eq_3.$$arity=2),Opal.defs(Opal.const_get_relative($nesting,"ENV"),"$[]",TMP_$$_4=function(name){return process.env[name]||nil},TMP_$$_4.$$arity=1),nil&&"[]"},Opal.modules["nodejs/file"]=function(Opal){function handle_unsupported_feature(message){switch(Opal.config.unsupported_features_severity){case"error":Opal.const_get_relative($nesting,"Kernel").$raise(Opal.const_get_relative($nesting,"NotImplementedError"),message);break;case"warning":warn(message)}}function warn(string){warnings[string]||(warnings[string]=!0,self.$warn(string))}function executeIOAction(action){try{return action()}catch(error){if(errno_codes.indexOf(error.code)>=0){var error_class=Opal.const_get_relative($nesting,"Errno").$const_get(error.code);throw error_class.$new(error.message)}throw error}}var self=Opal.top,$nesting=[],nil=Opal.nil,$klass=(Opal.breaker,Opal.slice,Opal.klass),$truthy=Opal.truthy;Opal.add_stubs(["$raise","$warn","$const_get","$new","$const_defined?","$const_set","$include","$node_require","$size","$respond_to?","$path","$join","$call","$exist?","$realpath","$!=","$close","$match","$gsub","$attr_reader"]);for(var errno_code,warnings={},errno_codes=["EACCES","EISDIR","EMFILE","ENOENT","EPERM"],i=0,ii=errno_codes.length;ii>i;i++)errno_code=errno_codes[i],Opal.const_get_relative($nesting,"Errno")["$const_defined?"](errno_code)||Opal.const_get_relative($nesting,"Errno").$const_set(errno_code,Opal.const_get_relative($nesting,"Class").$new(Opal.const_get_relative($nesting,"SystemCallError")));return function($base,$super,$parent_nesting){function $File(){}var TMP_File_read_1,TMP_File_write_2,TMP_File_exist$q_3,TMP_File_realpath_4,TMP_File_join_5,TMP_File_directory$q_6,TMP_File_file$q_7,TMP_File_readable$q_8,TMP_File_size_9,TMP_File_open_10,TMP_File_stat_11,TMP_File_mtime_12,TMP_File_symlink$q_13,TMP_File_initialize_14,TMP_File_write_15,TMP_File_flush_16,TMP_File_close_17,TMP_File_mtime_18,self=$File=$klass($base,$super,"File",$File),def=self.$$proto,$nesting=[self].concat($parent_nesting);null==self.__fs__&&(self.__fs__=nil),null==self.__path__&&(self.__path__=nil),def.fd=def.path=nil,self.$include(Opal.const_get_qualified(Opal.const_get_qualified("::","IO"),"Writable")),self.$include(Opal.const_get_qualified(Opal.const_get_qualified("::","IO"),"Readable")),self.__fs__=self.$node_require("fs"),self.__path__=self.$node_require("path");var __fs__=self.__fs__,__path__=self.__path__;return $truthy(__path__.sep!==Opal.const_get_relative($nesting,"Separator"))&&Opal.const_set($nesting[0],"ALT_SEPARATOR",__path__.sep),Opal.defs(self,"$read",TMP_File_read_1=function(path){return executeIOAction(function(){return __fs__.readFileSync(path).toString()})},TMP_File_read_1.$$arity=1),Opal.defs(self,"$write",TMP_File_write_2=function(path,data){return executeIOAction(function(){return __fs__.writeFileSync(path,data)}),data.$size()},TMP_File_write_2.$$arity=2),Opal.defs(self,"$exist?",TMP_File_exist$q_3=function(path){return $truthy(path["$respond_to?"]("path"))&&(path=path.$path()),executeIOAction(function(){return __fs__.existsSync(path)})},TMP_File_exist$q_3.$$arity=1),Opal.defs(self,"$realpath",TMP_File_realpath_4=function(pathname,dir_string,cache){var self=this,$iter=TMP_File_realpath_4.$$p,block=$iter||nil;return null==dir_string&&(dir_string=nil),null==cache&&(cache=nil),$iter&&(TMP_File_realpath_4.$$p=null),$truthy(dir_string)&&(pathname=self.$join(dir_string,pathname)),block!==nil?void 0:executeIOAction(function(){return __fs__.realpathSync(pathname,cache)})},TMP_File_realpath_4.$$arity=-2),Opal.defs(self,"$join",TMP_File_join_5=function(){var paths,$args_len=arguments.length,$rest_len=$args_len-0;0>$rest_len&&($rest_len=0),paths=new Array($rest_len);for(var $arg_idx=0;$args_len>$arg_idx;$arg_idx++)paths[$arg_idx-0]=arguments[$arg_idx];return __path__.join.apply(__path__,paths)},TMP_File_join_5.$$arity=-1),Opal.defs(self,"$directory?",TMP_File_directory$q_6=function(path){var self=this,result=nil,realpath=nil;return $truthy(self["$exist?"](path))?(result=executeIOAction(function(){return!!__fs__.lstatSync(path).isDirectory()}),$truthy(result)||(realpath=self.$realpath(path),$truthy(realpath["$!="](path))&&(result=executeIOAction(function(){return!!__fs__.lstatSync(realpath).isDirectory()}))),result):!1},TMP_File_directory$q_6.$$arity=1),Opal.defs(self,"$file?",TMP_File_file$q_7=function(path){var self=this,result=nil,realpath=nil;return $truthy(self["$exist?"](path))?(result=executeIOAction(function(){return!!__fs__.lstatSync(path).isFile()}),$truthy(result)||(realpath=self.$realpath(path),$truthy(realpath["$!="](path))&&(result=executeIOAction(function(){return!!__fs__.lstatSync(realpath).isFile()}))),result):!1},TMP_File_file$q_7.$$arity=1),Opal.defs(self,"$readable?",TMP_File_readable$q_8=function(path){var self=this;return $truthy(self["$exist?"](path))?"\n      try {\n        __fs__.accessSync(path, __fs__.R_OK);\n        return true;\n      } catch (error) {\n        return false;\n      }\n    ":!1},TMP_File_readable$q_8.$$arity=1),Opal.defs(self,"$size",TMP_File_size_9=function(path){return executeIOAction(function(){return __fs__.lstatSync(path).size})},TMP_File_size_9.$$arity=1),Opal.defs(self,"$open",TMP_File_open_10=function(path,mode){var self=this,$iter=TMP_File_open_10.$$p,$yield=$iter||nil,file=nil;return null==mode&&(mode="r"),$iter&&(TMP_File_open_10.$$p=null),file=self.$new(path,mode),$yield!==nil?function(){try{return Opal.yield1($yield,file)}finally{file.$close()}}():file},TMP_File_open_10.$$arity=-2),Opal.defs(self,"$stat",TMP_File_stat_11=function(path){return $truthy(path["$respond_to?"]("path"))&&(path=path.$path()),Opal.const_get_qualified(Opal.const_get_relative($nesting,"File"),"Stat").$new(path)},TMP_File_stat_11.$$arity=1),Opal.defs(self,"$mtime",TMP_File_mtime_12=function(path){return executeIOAction(function(){return __fs__.statSync(path).mtime})},TMP_File_mtime_12.$$arity=1),Opal.defs(self,"$symlink?",TMP_File_symlink$q_13=function(path){return executeIOAction(function(){return __fs__.lstatSync(path).isSymbolicLink()})},TMP_File_symlink$q_13.$$arity=1),Opal.defn(self,"$initialize",TMP_File_initialize_14=function(path,flags){var self=this,binary_flag_regexp=nil,encoding_flag_regexp=nil;return null==flags&&(flags="r"),binary_flag_regexp=/b/,encoding_flag_regexp=/:(.*)/,$truthy(flags.$match(binary_flag_regexp))&&handle_unsupported_feature("Binary flag (b) is unsupported by Node.js openSync method, removing flag."),flags=flags.$gsub(binary_flag_regexp,""),$truthy(flags.$match(encoding_flag_regexp))&&handle_unsupported_feature("Encoding flag (:encoding) is unsupported by Node.js openSync method, removing flag."),flags=flags.$gsub(encoding_flag_regexp,""),self.path=path,self.flags=flags,self.fd=executeIOAction(function(){return __fs__.openSync(path,flags)})},TMP_File_initialize_14.$$arity=-2),self.$attr_reader("path"),Opal.defn(self,"$write",TMP_File_write_15=function(string){var self=this;executeIOAction(function(){return __fs__.writeSync(self.fd,string)})},TMP_File_write_15.$$arity=1),Opal.defn(self,"$flush",TMP_File_flush_16=function(){var self=this;executeIOAction(function(){return __fs__.fsyncSync(self.fd)})},TMP_File_flush_16.$$arity=0),Opal.defn(self,"$close",TMP_File_close_17=function(){var self=this;executeIOAction(function(){return __fs__.closeSync(self.fd)})},TMP_File_close_17.$$arity=0),Opal.defn(self,"$mtime",TMP_File_mtime_18=function(){var self=this;return executeIOAction(function(){return __fs__.statSync(self.path).mtime})},TMP_File_mtime_18.$$arity=0),nil&&"mtime"}($nesting[0],Opal.const_get_relative($nesting,"IO"),$nesting),function($base,$super,$parent_nesting){function $Stat(){}{var TMP_Stat_initialize_19,TMP_Stat_file$q_20,TMP_Stat_mtime_21,self=$Stat=$klass($base,$super,"Stat",$Stat),def=self.$$proto;[self].concat($parent_nesting)}null==self.__fs__&&(self.__fs__=nil),def.path=nil,self.__fs__=self.$node_require("fs");var __fs__=self.__fs__;return Opal.defn(self,"$initialize",TMP_Stat_initialize_19=function(path){var self=this;return self.path=path},TMP_Stat_initialize_19.$$arity=1),Opal.defn(self,"$file?",TMP_Stat_file$q_20=function(){var self=this;return executeIOAction(function(){return __fs__.statSync(self.path).isFile()})},TMP_Stat_file$q_20.$$arity=0),Opal.defn(self,"$mtime",TMP_Stat_mtime_21=function(){var self=this;return executeIOAction(function(){return __fs__.statSync(self.path).mtime})},TMP_Stat_mtime_21.$$arity=0),nil&&"mtime"}(Opal.const_get_relative($nesting,"File"),null,$nesting)},Opal.modules["nodejs/dir"]=function(Opal){var $nesting=(Opal.top,[]),nil=Opal.nil,$klass=(Opal.breaker,Opal.slice,Opal.klass),$truthy=Opal.truthy,$send=Opal.send;return Opal.add_stubs(["$node_require","$respond_to?","$flat_map","$to_path","$coerce_to!"]),function($base,$super,$parent_nesting){function $Dir(){}var self=$Dir=$klass($base,$super,"Dir",$Dir),$nesting=(self.$$proto,[self].concat($parent_nesting));null==self.__glob__&&(self.__glob__=nil),null==self.__fs__&&(self.__fs__=nil),self.__glob__=self.$node_require("glob"),self.__fs__=self.$node_require("fs");var __glob__=self.__glob__,__fs__=self.__fs__;return function(self,$parent_nesting){var TMP_$$_1,TMP_pwd_2,TMP_mkdir_3,TMP_entries_4,TMP_glob_6,$nesting=(self.$$proto,[self].concat($parent_nesting));return Opal.defn(self,"$[]",TMP_$$_1=function(glob){return __glob__.sync(glob)},TMP_$$_1.$$arity=1),Opal.defn(self,"$pwd",TMP_pwd_2=function(){return process.cwd()},TMP_pwd_2.$$arity=0),Opal.defn(self,"$mkdir",TMP_mkdir_3=function(path){return __fs__.mkdirSync(path)},TMP_mkdir_3.$$arity=1),Opal.defn(self,"$entries",TMP_entries_4=function(dirname){for(var result=[],entries=__fs__.readdirSync(dirname),i=0,ii=entries.length;ii>i;i++)result.push(entries[i]);return result},TMP_entries_4.$$arity=1),Opal.defn(self,"$glob",TMP_glob_6=function(pattern){var TMP_5,self=this;return $truthy(pattern["$respond_to?"]("each"))||(pattern=[pattern]),$send(pattern,"flat_map",[],(TMP_5=function(subpattern){TMP_5.$$s||this;return null==subpattern&&(subpattern=nil),$truthy(subpattern["$respond_to?"]("to_path"))&&(subpattern=subpattern.$to_path()),subpattern=Opal.const_get_relative($nesting,"Opal")["$coerce_to!"](subpattern,Opal.const_get_relative($nesting,"String"),"to_str"),__glob__.sync(subpattern)},TMP_5.$$s=self,TMP_5.$$arity=1,TMP_5))},TMP_glob_6.$$arity=1),Opal.alias(self,"getwd","pwd")}(Opal.get_singleton_class(self),$nesting)}($nesting[0],null,$nesting)},Opal.modules["nodejs/io"]=function(Opal){function $rb_minus(lhs,rhs){return"number"==typeof lhs&&"number"==typeof rhs?lhs-rhs:lhs["$-"](rhs)}function executeIOAction(action){try{return action()}catch(error){if("EACCES"===error.code||"EISDIR"===error.code||"EMFILE"===error.code||"ENOENT"===error.code||"EPERM"===error.code)throw Opal.IOError.$new(error.message);throw error}}var TMP_7,TMP_8,self=Opal.top,$nesting=[],nil=Opal.nil,$klass=(Opal.breaker,Opal.slice,Opal.klass),$truthy=Opal.truthy,$gvars=Opal.gvars,$send=Opal.send,$writer=nil;return Opal.add_stubs(["$node_require","$attr_reader","$write","$read","$size","$to_enum","$chomp","$each_line","$lambda","$write_proc=","$-","$tty="]),function($base,$super,$parent_nesting){function $IO(){}var TMP_IO_initialize_1,TMP_IO_write_2,TMP_IO_read_3,TMP_IO_read_4,TMP_IO_each_line_5,TMP_IO_binread_6,self=$IO=$klass($base,$super,"IO",$IO),def=self.$$proto,$nesting=[self].concat($parent_nesting);null==self.__fs__&&(self.__fs__=nil),def.eof=def.path=nil,self.__fs__=self.$node_require("fs");var __fs__=self.__fs__;return self.$attr_reader("eof"),self.$attr_reader("lineno"),Opal.defn(self,"$initialize",TMP_IO_initialize_1=function(){var self=this;return self.eof=!1,self.lineno=0},TMP_IO_initialize_1.$$arity=0),Opal.defs(self,"$write",TMP_IO_write_2=function(path,data){return Opal.const_get_relative($nesting,"File").$write(path,data)},TMP_IO_write_2.$$arity=2),Opal.defs(self,"$read",TMP_IO_read_3=function(path){return Opal.const_get_relative($nesting,"File").$read(path)},TMP_IO_read_3.$$arity=1),Opal.defn(self,"$read",TMP_IO_read_4=function(){var self=this,res=nil;return $truthy(self.eof)?"":(res=executeIOAction(function(){return __fs__.readFileSync(self.path).toString()}),self.eof=!0,self.lineno=res.$size(),res)},TMP_IO_read_4.$$arity=0),Opal.defn(self,"$each_line",TMP_IO_each_line_5=function(separator){var self=this,$iter=TMP_IO_each_line_5.$$p,block=$iter||nil,lines=nil;if(null==$gvars["/"]&&($gvars["/"]=nil),null==separator&&(separator=$gvars["/"]),$iter&&(TMP_IO_each_line_5.$$p=null),$truthy(self.eof))return function(){return block!==nil?self:[].$to_enum()}();if(block!==nil){lines=Opal.const_get_relative($nesting,"File").$read(self.path),self.eof=!1,self.lineno=0;for(var chomped=lines.$chomp(),trailing=lines.length!=chomped.length,splitted=chomped.split(separator),i=0,length=splitted.length;length>i;i++)self.lineno+=1,length-1>i||trailing?Opal.yield1(block,splitted[i]+separator):Opal.yield1(block,splitted[i]);return self.eof=!0,self}return self.$read().$each_line()},TMP_IO_each_line_5.$$arity=-1),Opal.defs(self,"$binread",TMP_IO_binread_6=function(path){return executeIOAction(function(){return __fs__.readFileSync(path).toString("binary")})},TMP_IO_binread_6.$$arity=1),nil&&"binread"}($nesting[0],null,$nesting),$writer=[$send(self,"lambda",[],(TMP_7=function(string){TMP_7.$$s||this;return null==string&&(string=nil),process.stdout.write(string)},TMP_7.$$s=self,TMP_7.$$arity=1,TMP_7))],$send(Opal.const_get_relative($nesting,"STDOUT"),"write_proc=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[$send(self,"lambda",[],(TMP_8=function(string){TMP_8.$$s||this;return null==string&&(string=nil),process.stderr.write(string)},TMP_8.$$s=self,TMP_8.$$arity=1,TMP_8))],$send(Opal.const_get_relative($nesting,"STDERR"),"write_proc=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[!0],$send(Opal.const_get_relative($nesting,"STDOUT"),"tty=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$writer=[!0],$send(Opal.const_get_relative($nesting,"STDERR"),"tty=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]},Opal.modules["nodejs/open-uri"]=function(Opal){var $nesting=(Opal.top,[]),nil=Opal.nil,$module=(Opal.breaker,Opal.slice,Opal.module);return Opal.add_stubs(["$node_require"]),function($base,$parent_nesting){{var $OpenURI,TMP_OpenURI_request_1,self=$OpenURI=$module($base,"OpenURI");self.$$proto,[self].concat($parent_nesting)}null==self.__xmlhttprequest__&&(self.__xmlhttprequest__=nil),self.__xmlhttprequest__=self.$node_require("xmlhttprequest");var __XMLHttpRequest__=self.__xmlhttprequest__.XMLHttpRequest;Opal.defs(self,"$request",TMP_OpenURI_request_1=function(uri){var xhr=new __XMLHttpRequest__;return xhr.open("GET",uri,!1),xhr.send(),xhr},TMP_OpenURI_request_1.$$arity=1)}($nesting[0],$nesting)},Opal.modules.nodejs=function(Opal){var self=Opal.top,$nesting=[],$module=(Opal.nil,Opal.breaker,Opal.slice,Opal.module);return Opal.add_stubs(["$require"]),function($base,$parent_nesting){{var $NodeJS,self=$NodeJS=$module($base,"NodeJS");self.$$proto,[self].concat($parent_nesting)}}($nesting[0],$nesting),self.$require("nodejs/kernel"),self.$require("nodejs/file"),self.$require("nodejs/dir"),self.$require("nodejs/io"),self.$require("nodejs/open-uri")};