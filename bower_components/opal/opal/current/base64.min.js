Opal.modules.base64=function(Opal){Opal.top;var $nesting=[],nil=Opal.nil,$module=(Opal.breaker,Opal.slice,Opal.module),$truthy=Opal.truthy,$hash2=Opal.hash2;return Opal.add_stubs(["$raise","$delete"]),function($base,$parent_nesting){var TMP_Base64_decode64_1,TMP_Base64_encode64_2,TMP_Base64_strict_decode64_3,TMP_Base64_strict_encode64_4,TMP_Base64_urlsafe_decode64_5,TMP_Base64_urlsafe_encode64_6,encode,decode,self=$module($base,"Base64"),$nesting=(self.$$proto,[self].concat($parent_nesting)),chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";encode=Opal.global.btoa||function(input){for(var block,charCode,str=String(input),idx=0,map=chars,output="";str.charAt(0|idx)||(map="=",idx%1);output+=map.charAt(63&block>>8-idx%1*8))255<(charCode=str.charCodeAt(idx+=.75))&&self.$raise(Opal.const_get_relative($nesting,"ArgumentError"),"invalid character (failed: The string to be encoded contains characters outside of the Latin1 range.)"),block=block<<8|charCode;return output},decode=Opal.global.atob||function(input){var str=String(input).replace(/=+$/,"");str.length%4==1&&self.$raise(Opal.const_get_relative($nesting,"ArgumentError"),"invalid base64 (failed: The string to be decoded is not correctly encoded.)");for(var bs,buffer,bc=0,idx=0,output="";buffer=str.charAt(idx++);~buffer&&(bs=bc%4?64*bs+buffer:buffer,bc++%4)?output+=String.fromCharCode(255&bs>>(-2*bc&6)):0)buffer=chars.indexOf(buffer);return output},Opal.defs(self,"$decode64",TMP_Base64_decode64_1=function(string){return decode(string.replace(/\r?\n/g,""))},TMP_Base64_decode64_1.$$arity=1),Opal.defs(self,"$encode64",TMP_Base64_encode64_2=function(string){return encode(string).replace(/(.{60})/g,"$1\n").replace(/([^\n])$/g,"$1\n")},TMP_Base64_encode64_2.$$arity=1),Opal.defs(self,"$strict_decode64",TMP_Base64_strict_decode64_3=function(string){return decode(string)},TMP_Base64_strict_decode64_3.$$arity=1),Opal.defs(self,"$strict_encode64",TMP_Base64_strict_encode64_4=function(string){return encode(string)},TMP_Base64_strict_encode64_4.$$arity=1),Opal.defs(self,"$urlsafe_decode64",TMP_Base64_urlsafe_decode64_5=function(string){return decode(string.replace(/\-/g,"+").replace(/_/g,"/"))},TMP_Base64_urlsafe_decode64_5.$$arity=1),Opal.defs(self,"$urlsafe_encode64",TMP_Base64_urlsafe_encode64_6=function(string,$kwargs){var padding,str=nil;if(null==$kwargs||!$kwargs.$$is_hash){if(null!=$kwargs)throw Opal.ArgumentError.$new("expected kwargs");$kwargs=$hash2([],{})}return null==(padding=$kwargs.$$smap.padding)&&(padding=!0),str=encode(string).replace(/\+/g,"-").replace(/\//g,"_"),$truthy(padding)||(str=str.$delete("=")),str},TMP_Base64_urlsafe_encode64_6.$$arity=-2)}($nesting[0],$nesting)};
